# مستندات وب‌سرویس نوسان (Navasan API)

این گزارش شامل بررسی فنی مستندات وب‌سرویس نوسان برای دریافت نرخ لحظه‌ای ارز، طلا، سکه و رمز‌ارزها است.

## ۱. اطلاعات کلی
*   **آدرس پایه (Base URL):** `http://api.navasan.tech`
*   **فرمت پاسخ‌ها:** تمام پاسخ‌ها در قالب `JSON` ارائه می‌شوند.
*   **احراز هویت:** از طریق پارامتر `api_key` در Query String انجام می‌شود.
*   **دریافت کلید API:** نیاز به ارسال ایمیل به `webservice@navasan.net` دارد.

---

## ۲. وب‌سرویس‌های اصلی

### الف) آخرین قیمت‌ها (Latest Rates)
این متد برای دریافت جدیدترین نرخ‌های لحظه‌ای به همراه زمان بروزرسانی و میزان تغییرات نسبت به روز قبل استفاده می‌شود.
*   **آدرس:** `GET /latest/`
*   **پارامترهای اختیاری:**
    *   `item`: برای دریافت نرخ یک آیتم خاص (مثلاً `usd_sell`).
    *   `dollar_rate`: (مخصوص رمز‌ارزها) در صورت `true` بودن، قیمت دلاری را هم برمی‌گرداند.
    *   `dirham_rate`: (مخصوص رمز‌ارزها) در صورت `true` بودن، قیمت درهمی را هم برمی‌گرداند.

### ب) قیمت‌های روزانه (Daily Rates)
دریافت کلیه بروزرسانی‌های یک ارز خاص در یک تاریخ مشخص.
*   **آدرس:** `GET /dailyCurrency/`
*   **پارامترهای اجباری:**
    *   `item`: نماد ارز مورد نظر.
    *   `date`: تاریخ مورد نظر (به صورت شمسی `۱۳۹۸-۰۶-۲۰` یا Timestamp یونیکس).

### ج) آرشیو روزانه (OHLC Search)
دریافت نرخ‌های بازگشایی (Open)، بیشینه (High)، کمینه (Low) و پایانی (Close) در یک بازه زمانی.
*   **آدرس:** `GET /ohlcSearch/`
*   **پارامترهای اجباری:**
    *   `item`: نماد مورد نظر.
    *   `start` و `end`: تاریخ شروع و پایان بازه.

### د) اطلاع از میزان مصرف (Usage)
برای مشاهده تعداد درخواست‌های ارسال شده (ساعتی، روزانه و ماهانه).
*   **آدرس:** `GET /usage/`

---

## ۳. ساختار داده‌ها

*   **اعداد:** مقادیر اعشاری به صورت رشته (String) بازگردانده می‌شوند تا دقت محاسباتی حفظ شود.
*   **زمان:** از نشانگرهای زمانی یونیکس (Unix Timestamp) استفاده می‌شود.
*   **تاریخ:** تاریخ‌های شمسی با فرمت `YYYY-MM-DD HH:mm:ss` ارائه می‌شوند.

---

## ۴. کدهای وضعیت (Status Codes)
*   **200 OK:** درخواست با موفقیت انجام شد.
*   **400 Bad Request:** خطا در پارامترهای ارسالی.
*   **401 Unauthorized:** کلید API نامعتبر است.
*   **429 Too Many Requests:** تعداد درخواست‌ها بیش از حد مجاز است.
*   **503 Service Unavailable:** خطای داخلی یا اتمام سهمیه (Limit) API.

---

## ۵. اقلام مورد پشتیبانی (نمادهای پرکاربرد)

| دسته‌بندی | نمادهای نمونه |
| :--- | :--- |
| **ارزها** | `usd_sell` (دلار تهران), `aed_sell` (درهم), `eur` (یورو), `try` (لیر) |
| **طلا و سکه** | `sekkeh` (سکه امامی), `18ayar` (طلای ۱۸ عیار), `abshodeh` (آبشده), `bahar` (بهار آزادی) |
| **رمز‌ارزها** | `btc` (بیت‌کوین), `eth` (اتریوم), `usdt` (تتر), `sol` (سولانا) |
| **حباب‌ها** | `bub_sekkeh` (حباب سکه), `bub_18ayar` (حباب طلا) |
| **حواله‌ها** | `eur_hav` (حواله یورو), `usd_shakhs` (حواله شخص) |

---

**نکته فنی:** برای جلوگیری از خطای دقت در محاسبات مالی، توصیه می‌شود مقادیر عددی که به صورت رشته دریافت می‌شوند را با استفاده از کتابخانه‌های متناسب با دقت بالا (مانند Decimal در پایتون یا Big.js در جاوااسکریپت) پردازش کنید.
